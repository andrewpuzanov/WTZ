
:root{
  --bg: #0b1020;
  --panel: #121a32;
  --panel-2: #0f162b;
  --text: #e8eefc;
  --muted: #aab6d3;
  --accent: #5aa1ff;
  --accent-2: #9be37d;
  --danger: #ff6b6b;
  --grid-border: #1f2742;
  --hour-alt: #141d3a;
  --focus: #1bd1ff;
  --radius: 14px;

  --cell-width: 50px;
  --time-font-size: 11px;

  --city-col: 260px;
  --remove-col: 44px;

  --grid-pad-x: 8px;
  --grid-pad-y: 8px;
  --grid-pad: calc(var(--grid-pad-x) * 2);
  --grid-border-w: 2px;
}

/* DARK THEMES */
html[data-theme="0"] {
  --bg:#0b1020; --panel:#121a32; --panel-2:#0f162b; --text:#e8eefc; --muted:#aab6d3;
  --accent:#5aa1ff; --accent-2:#9be37d; --grid-border:#1f2742; --hour-alt:#141d3a; --focus:#1bd1ff;
}
html[data-theme="1"] {
  --bg:#1b0f22; --panel:#2a1934; --panel-2:#241530; --text:#ffeef8; --muted:#e9cfe3;
  --accent:#ff86c8; --accent-2:#ffd166; --grid-border:#3a2147; --hour-alt:#2e1b3a; --focus:#ff9dd6;
}
html[data-theme="2"] {
  --bg:#0b1b10; --panel:#0f2516; --panel-2:#0c1f13; --text:#e9ffe9; --muted:#bfe6c7;
  --accent:#7df9a3; --accent-2:#6ac2ff; --grid-border:#163022; --hour-alt:#13281c; --focus:#8cffbf;
}
html[data-theme="3"] {
  --bg:#0c0c0c; --panel:#141414; --panel-2:#111; --text:#f0f0f0; --muted:#bbb;
  --accent:#8ad; --accent-2:#ddd; --grid-border:#222; --hour-alt:#171717; --focus:#aaa;
}

/* LIGHT THEMES */
html[data-theme="4"] { /* Pearl */
  --bg:#f7f8fb; --panel:#ffffff; --panel-2:#f3f5fa; --text:#1d2433; --muted:#5b6b85;
  --accent:#3a7bff; --accent-2:#2f9e44; --grid-border:#d9e0ee; --hour-alt:#eef1f8; --focus:#3a7bff;
}
html[data-theme="5"] { /* Sand */
  --bg:#fbf7f1; --panel:#fffaf2; --panel-2:#fff6e6; --text:#2a2430; --muted:#6b6153;
  --accent:#e09f3e; --accent-2:#3a86ff; --grid-border:#eadfcd; --hour-alt:#f8eedf; --focus:#e09f3e;
}
html[data-theme="6"] { /* Sky */
  --bg:#eaf2ff;
  --panel:#f9fbff;
  --panel-2:#e2edff;
  --text:#122033;
  --muted:#4b5d78;
  --accent:#2b8aef;
  --accent-2:#22b8cf;
  --grid-border:#c7dcff;
  --hour-alt:#dfeaff;
  --focus:#2b8aef;
}
html[data-theme="7"] { /* Paper */
  --bg:#ffffff; --panel:#ffffff; --panel-2:#f7f7f7; --text:#141414; --muted:#6a6a6a;
  --accent:#111827; --accent-2:#16a34a; --grid-border:#e5e5e5; --hour-alt:#f3f3f3; --focus:#111827;
}

* { box-sizing: border-box; }
html, body { margin:0; padding:0; height:100%; background: var(--bg); color: var(--text); font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Arial, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol'; }

/* Normalize form controls font */
input, select, button { font-family: inherit; }

/* Header */
.app-header {
  background: var(--panel);
  position: sticky; top:0; z-index: 10;
}
.header-inner {
  position: relative;
  display:flex; align-items:center; justify-content:space-between;
  gap: 16px; padding: 12px 16px 14px;
  width: calc(var(--city-col) + (24 * var(--cell-width)) + var(--remove-col) + var(--grid-pad) + var(--grid-border-w));
  margin: 0 auto; /* align to grid edges */
}
/* Bottom separator aligned to grid width only */
.header-inner::after {
  content:""; position:absolute; left:0; right:0; bottom:0;
  border-bottom: 1px solid var(--grid-border);
}
.title-wrap h1 { margin:0; font-size: 18px; font-weight: 700; letter-spacing:.2px; }
.title-wrap h1 small { font-weight: 400; color: var(--muted); font-size: 12px; margin-left: 8px; }

.controls { display:flex; gap: 12px; align-items:center; flex-wrap: wrap; }
.controls input[type="date"], .controls select, .controls button {
  background: var(--panel-2); color: var(--text); border:1px solid var(--grid-border);
  border-radius: 10px; padding: 6px 10px; box-shadow: none;
  transition: border-color .15s ease, background-color .15s ease, color .15s ease, box-shadow .15s ease;
}
/* Hover highlight for actionable controls */
.controls input[type="date"]:hover,
.controls select:hover,
.controls button:hover,
#addCityForm .btn-neutral:hover,
#cityInput:hover,
.remove-row:hover {
  border-color: var(--accent);
  box-shadow: 0 0 0 2px rgba(90,161,255,.35);
}

/* Add-city bar */
.add-city {
  background: linear-gradient(180deg, var(--panel), transparent);
}
.add-city .maxline {
  position: relative;
  width: calc(var(--city-col) + (24 * var(--cell-width)) + var(--remove-col) + var(--grid-pad) + var(--grid-border-w));
  margin: 0 auto;
  padding: 12px 16px 14px;
}
/* Bottom separator aligned to grid width only */
.add-city .maxline::after {
  content:""; position:absolute; left:0; right:0; bottom:0;
  border-bottom: 1px solid var(--grid-border);
}
#addCityForm { display:flex; gap: 8px; align-items:center; flex-wrap: wrap; }
#cityInput {
  min-width: 260px; padding: 10px 12px; border-radius: 10px;
  border:1px solid var(--grid-border); background: var(--panel-2); color: var(--text);
  transition: border-color .15s ease, box-shadow .15s ease;
}
/* Apply "Today" neutral style to Add buttons */
#addCityForm .btn-neutral {
  background: var(--panel-2); color: var(--text); border:1px solid var(--grid-border);
  padding: 10px 14px; border-radius: 10px; cursor:pointer;
  transition: border-color .15s ease, box-shadow .15s ease, background-color .15s ease, color .15s ease;
}

/* Hide (but keep in DOM) the custom time zone button */
#customTzBtn { display: none; }

/* Grid */
.grid-container { padding: 14px 10px 40px; overflow: auto; }
.grid {
  position: relative;
  background: var(--panel); border:1px solid var(--grid-border); border-radius: var(--radius);
  padding: var(--grid-pad-y) var(--grid-pad-x);
  width: max-content; margin: 0 auto; /* center horizontally */
}
/* Tall focus bar with caps */
.grid .focus-bar {
  position: absolute;
  top: calc(var(--grid-pad-y) - 2px);
  bottom: calc(var(--grid-pad-y) - 2px);
  width: var(--cell-width);
  background: transparent;
  border-left: 3px solid var(--focus);
  border-right: 3px solid var(--focus);
  border-top: 2px solid var(--focus);
  border-bottom: 2px solid var(--focus);
  pointer-events: none;
  z-index: 2;
}

.row {
  display:grid; grid-template-columns: var(--city-col) calc(24 * var(--cell-width)) var(--remove-col);
  align-items: stretch; border-bottom: 1px solid var(--grid-border);
  position: relative;
}
.row:last-child { border-bottom: none; }
.row-header {
  padding: 10px 12px;
  display:flex; flex-direction: column; justify-content:center; gap: 4px;
  border-right: 1px solid var(--grid-border);
}
.city-name { font-weight:700; }
.city-sub { font-size:12px; color: var(--muted); }

/* Remove button */
.remove-row {
  width: 100%; height: 100%;
  background: transparent;
  border: 0.75px solid var(--grid-border);
  border-radius: 10px;
  color: var(--accent);
  font-size: 18px; cursor:pointer;
  transition: border-color .15s ease, box-shadow .15s ease, background-color .15s ease, color .15s ease;
}
.remove-row:hover { color: var(--danger); }

/* Timeline */
.timeline {
  display:grid; grid-template-columns: repeat(24, var(--cell-width));
  gap: 0; position: relative; outline: none;
  width: calc(24 * var(--cell-width));
}
.hour {
  padding: 8px 4px; border-left: 1px solid var(--grid-border);
  display:flex; flex-direction: column; gap:2px; align-items:center; justify-content:center;
  font-size: 11px; color: var(--muted); min-height: 48px;
}
/* alternating column background */
.hour:nth-child(odd){ background: var(--hour-alt); }
/* top/bottom borders for darker columns at the very first and very last row */
.grid > .row:first-child .timeline .hour:nth-child(odd){ border-top: 1px solid var(--grid-border); }
.grid > .row:last-child  .timeline .hour:nth-child(odd){ border-bottom: 1px solid var(--grid-border); }

.hour .date { opacity:.9; user-select: none; font-size: 10px; color: var(--muted); white-space: nowrap; line-height: 1.1; }
.hour .time { font-weight:600; color: var(--text); font-size: var(--time-font-size); white-space: nowrap; line-height: 1.1; }
