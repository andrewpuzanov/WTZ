
/* =========================================================
   v1.9.127 CSS tidy â€” Semantic palette layer (no visual change)
   ========================================================= */
:root {
  --clr-surface: var(--surface, #1b1b1b);
  --clr-grid: var(--grid, rgba(128,128,128,.25));
  --clr-text: var(--text, #e8eefc);
  --clr-text-muted: var(--muted, #aab6d3);
  --clr-accent: var(--accent, #5aa1ff);
  --clr-hour-day: var(--hour, #fae8ff);
  --clr-hour-night: var(--hour-night, var(--hour-alt));
}

/* Aliases wired to palette (keeps current visuals) */
.hour.day { background: var(--clr-hour-day) !important; }
.hour.night { background: var(--clr-hour-night) !important; }

:root {
  --bg: #0b1020;
  --panel: #121a32;
  --panel-2: #0f162b;
  --text: #e8eefc;
  --muted: #aab6d3;
  --accent: #5aa1ff;
  --accent-2: #9be37d;
  --danger: #ff6b6b;
  --grid-border: #1f2742;
  --hour-alt: #141d3a;
  --focus: #1bd1ff;
  --radius: 14px;
  --cell-width: 50px;
  --time-font-size: 11px;
  --city-col: 260px;
  --remove-col: 44px;
  --grid-pad-x: 8px;
  --grid-pad-y: 8px;
  --grid-pad: calc(var(--grid-pad-x) * 2);
  --grid-border-w: 2px;
}

/* DARK THEMES */
/*Midnight*/
html[data-theme="0"] {
  --bg: #0b1020;
  --panel: #121a32;
  --panel-2: var(--panel);
  --text: #e8eefc;
  --muted: #aab6d3;
  --accent: #5aa1ff;
  --accent-2: #9be37d;
  --grid-border: #1f2742;
  --hour-alt: #1B2B51;
  --focus: #1bd1ff;
}

/*Dawn*/
html[data-theme="1"] {
  --bg: #1b0f22;
  --panel: #22152B;
  --panel-2: var(--panel);
  --text: #ffeef8;
  --muted: #e9cfe3;
  --accent: #ff86c8;
  --accent-2: #ffd166;
  --grid-border: #3a2147;
  --hour-alt: #392349;
  --focus: #ff9dd6;
}

/*Forest*/
html[data-theme="2"] {
  --bg: #0b1b10;
  --panel: #0C1E12;
  --panel-2: var(--panel);
  --text: #e9ffe9;
  --muted: #bfe6c7;
  --accent: #7df9a3;
  --accent-2: #6ac2ff;
  --grid-border: #163022;
  --hour-alt: #224731;
  --focus: #8cffbf;
}

/*Mono*/
html[data-theme="3"] {
  --bg: #0c0c0c;
  --panel: #141414;
  --panel-2: var(--panel);
  --text: #f0f0f0;
  --muted: #bbb;
  --accent: #8ad;
  --accent-2: #ddd;
  --grid-border: #222;
  --hour-alt: #585858;
  --focus: #aaa;
}

/* LIGHT THEMES */

/* Pearl */
html[data-theme="4"] {
  --bg: #f7f8fb;
  --panel: #fafafa;
  --panel-2: var(--panel);
  --text: #1d2433;
  --muted: #5b6b85;
  --accent: #3a7bff;
  --accent-2: #2f9e44;
  --grid-border: #d9e0ee;
  --hour-alt: #DEE0E5;
  --focus: #3a7bFF;
}

/* Sand */
html[data-theme="5"] {
  --bg: #fbf7f1;
  --panel: #fffaf2;
  --panel-2: var(--panel);
  --text: #2a2430;
  --muted: #6b6153;
  --accent: #e09f3e;
  --accent-2: #3a86ff;
  --grid-border: #eadfcd;
  --hour-alt: #f8eedf;
  --focus: #e09f3e;
}

/* Sky */
html[data-theme="6"] {
  --bg: #eaf2ff;
  --panel: #f9fbff;
  --panel-2: var(--panel);
  --text: #122033;
  --muted: #4b5d78;
  --accent: #2b8aef;
  --accent-2: #22b8cf;
  --grid-border: #c7dcff;
  --hour-alt: #dfeaff;
  --focus: #2b8aef;
}

/* Fuchsia */
html[data-theme="7"] {
  --bg: #fbe7ff;
  --panel: #F4D3FF;
  --panel-2: var(--panel);
  --text: #1f2937;
  --muted: #6b4b66;
  --accent: #d946ef;
  --accent-2: #22b8cf;
  --grid-border: #e4c8fb;
  --hour-alt: var(--panel);
  --focus: #d946ef;
  --accent-contrast: #ffffff;
  --panel-1: #ffffff;
  --hour: #fae8ff;
  --focus-ring: #d946ef;
  --outline: #e5b6fa;
  --link: #d946ef;
  --selection: #e879f9;
  --gridline: #edd6fb;
}

/* Wood */
html[data-theme="8"] {
  --bg: #faf0e4;
  --panel: #ead8c2;
  --panel-2: #ead8c2;
  --text: #1f2937;
  --muted: #6a5746;
  --accent: #8b5e34;
  --accent-2: #22b8cf;
  --grid-border: #d6c2ab;
  --hour-alt: #dec5a6;
  --focus: #8b5e34;
  --accent-contrast: #ffffff;
  --panel-1: #ffffff;
  --hour: #f3e9dc;
  --focus-ring: #8b5e34;
  --outline: #d9c5aa;
  --link: #8b5e34;
  --selection: #a47148;
  --gridline: #e2d3c1;
}

* {
    box-sizing: border-box;
}

html, body {
    margin: 0;
    padding: 0;
    height: 100%;
    background: var(--bg);
    color: var(--text);
    font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Arial, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';
}

/* Normalize form controls font */
input, select, button { font-family: inherit; }

/* Header */
.app-header {
  background: var(--panel);
  position: sticky; top:0; z-index: 10;
}
.header-inner {
  position: relative;
  display:flex; align-items:center; justify-content:space-between;
  gap: 16px; padding: 12px 16px 14px;
  width: calc(var(--city-col) + (24 * var(--cell-width)) + var(--remove-col) + var(--grid-pad) + var(--grid-border-w));
  margin: 0 auto; /* align to grid edges */
}
/* Bottom separator aligned to grid width only */
.header-inner::after {
  content:""; position:absolute; left:0; right:0; bottom:0;
  border-bottom: 1px solid var(--grid-border);
}
.title-wrap h1 { margin:0; font-size: 18px; font-weight: 700; letter-spacing:.2px; }
.title-wrap h1 small { font-weight: 400; color: var(--muted); font-size: 12px; margin-left: 8px; }

.controls { display:flex; gap: 12px; align-items:center; flex-wrap: wrap; }
.controls input[type="date"], .controls select, .controls button {
  background: var(--panel-2); color: var(--text); border:1px solid var(--grid-border);
  border-radius: 10px; padding: 6px 10px; box-shadow: none;
  transition: border-color .15s ease, background-color .15s ease, color .15s ease, box-shadow .15s ease;
}
/* Hover highlight for actionable controls */
.controls input[type="date"]:hover,
.controls select:hover,
.controls button:hover,
#addCityForm .btn-neutral:hover,
#cityInput:hover,
.remove-row:hover {
  border-color: var(--accent);
  box-shadow: 0 0 0 2px rgba(90,161,255,.35);
}

/* Add-city bar */
.add-city {
  background: linear-gradient(180deg, var(--panel), transparent);
}
.add-city .maxline {
  position: relative;
  width: calc(var(--city-col) + (24 * var(--cell-width)) + var(--remove-col) + var(--grid-pad) + var(--grid-border-w));
  margin: 0 auto;
  padding: 12px 16px 14px;
  display:flex; flex-wrap:wrap; align-items:center; gap:12px; }

/* Bottom separator aligned to grid width only */
.add-city .maxline::after {
  content:""; position:absolute; left:0; right:0; bottom:0;
  border-bottom: 1px solid var(--grid-border);
}
#addCityForm { display:flex; gap: 8px; align-items:center; flex-wrap: wrap; }
#cityInput {
  min-width: 260px; padding: 10px 12px; border-radius: 10px;
  border:1px solid var(--grid-border); background: var(--panel-2); color: var(--text);
  transition: border-color .15s ease, box-shadow .15s ease;
}
/* Apply "Today" neutral style to Add buttons */
#addCityForm .btn-neutral {
  background: var(--panel-2); color: var(--text); border:1px solid var(--grid-border);
  padding: 10px 14px; border-radius: 10px; cursor:pointer;
  transition: border-color .15s ease, box-shadow .15s ease, background-color .15s ease, color .15s ease;
}

/* Hide (but keep) custom time zone button */
#customTzBtn { display: none; }

/* Grid */
.grid-container { padding: 14px 10px 40px; overflow: auto; }
.grid {
  position: relative;
  background: var(--panel); border:1px solid var(--grid-border); border-radius: var(--radius);
  padding: var(--grid-pad-y) var(--grid-pad-x);
  width: max-content; margin: 0 auto; /* center horizontally */
}
/* Tall focus bar with caps */
.grid .focus-bar {
  position: absolute;
  top: calc(var(--grid-pad-y) - 2px);
  bottom: calc(var(--grid-pad-y) - 2px);
  width: var(--cell-width);
  background: transparent;
  border-left: 3px solid var(--focus);
  border-right: 3px solid var(--focus);
  border-top: 2px solid var(--focus);
  border-bottom: 2px solid var(--focus);
  pointer-events: none;
  z-index: 2;
}

.row {
  display:grid; grid-template-columns: var(--city-col) calc(24 * var(--cell-width)) var(--remove-col);
  align-items: stretch; border-bottom: 1px solid var(--grid-border);
  position: relative;
}
.row:last-child { border-bottom: none; }


/* Remove button */
.remove-row {
  width: 100%; height: 100%;
  background: transparent;
  border: 0.75px solid var(--grid-border);
  border-radius: 10px;
  color: var(--accent);
  font-size: 18px; cursor:pointer;
  transition: border-color .15s ease, box-shadow .15s ease, background-color .15s ease, color .15s ease;
}
.remove-row:hover { color: var(--danger); }

/* Timeline */
.timeline {
    display: grid;
    grid-template-columns: repeat(24, var(--cell-width));
    gap: 0;
    position: relative;
    outline: none;
    width: calc(24 * var(--cell-width));
}

.hour {
    padding: 8px 4px;
    border-left: 1px solid var(--grid-border);
    display: flex;
    flex-direction: column;
    gap: 2px;
    align-items: center;
    justify-content: center;
    font-size: 11px;
    color: var(--muted);
    min-height: 48px;
}

/* alternating column background */
    .hour:nth-child(odd) {
        background: var(--hour-alt);
    }

/* top/bottom borders for darker columns at the very first and very last row */
.grid > .row:first-child .timeline .hour:nth-child(odd) {
    border-top: 1px solid var(--grid-border);
}

.grid > .row:last-child .timeline .hour:nth-child(odd) {
    border-bottom: 1px solid var(--grid-border);
}

.hour .date {
    opacity: .9;
    user-select: none;
    font-size: 10px;
    color: var(--muted);
    white-space: nowrap;
    line-height: 1.1;
}

.hour .time {
    font-weight: 600;
    color: var(--text);
    font-size: var(--time-font-size);
    white-space: nowrap;
    line-height: 1.1;
    font-weight: bold;
}


/* === v1.9.5 overrides === */

/* Keep custom TZ button hidden */
#customTzBtn { display: none !important; }

/* Narrower remove column to fit the smaller button */
:root {
  --remove-col: 40px !important;
  --remove-x: 12px;              /* cross size */
  --remove-btn: calc(var(--remove-x) * 2); /* button box ~2x cross */
}

/* Row grid order: City | Remove | Timeline */
.row { grid-template-columns: var(--city-col) var(--remove-col) calc(24 * var(--cell-width)) !important; }

/* No divider between city and remove button */
.row-header { border-right: none !important; }

/* City name ~20% smaller */
.row-header .city-name { font-size: 0.8em !important; }

/* Remove button sized box, centered; keep border width same on hover */
.remove-row {
  width: var(--remove-btn);
  height: var(--remove-btn);
  place-self: center;                 /* center inside the remove column cell */
  background: transparent;
  border: 0.75px solid var(--grid-border);
  border-radius: 10px;
  color: var(--accent);
  font-size: var(--remove-x);
  line-height: 1;
  display: grid;
  place-items: center;
  cursor: pointer;
  transition: border-color .15s ease, box-shadow .15s ease, background-color .15s ease, color .15s ease;
}
.remove-row:hover { color: var(--danger); box-shadow: 0 0 0 1px rgba(90,161,255,.25); }

/* Disable alternating backgrounds & their special borders */
.timeline .hour,
.timeline .hour:nth-child(odd) {
  background: transparent !important;
  border-top: 0 !important;
  border-bottom: 0 !important;
}

/* Day/Night coloring using existing theme tokens */
:root { --hour-day: var(--panel-2); --hour-night: var(--hour-alt); }

/* Keep drag-handle cursor */
.row-header { cursor: grab; user-select: none; }
.row-header:active { cursor: grabbing; }

/* === v1.9.13: map day/night backgrounds to theme tokens and enforce === */
:root, html[data-theme]{
  /* Use the theme's existing hour colors */
  --hour-day: var(--hour);
  --hour-night: var(--hour-alt);
}
.grid .row .timeline .hour.day   { background: var(--hour-day) !important; }
.grid .row .timeline .hour.night { background: var(--hour-night) !important; }

/* v1.9.44: controls on same line as Add city */
.add-city .maxline { display:flex; align-items:center; gap:12px; }
.add-city .maxline .right-controls { margin-left:auto; display:flex; gap:10px; align-items:center; }

/* v1.9.45: align right controls with content edge */
:root { --content-pad: 16px; }

/* Ensure the add-city row uses the same horizontal padding as the grid content */
.add-city .maxline { padding-left: var(--content-pad); padding-right: var(--content-pad); }

/* Push the controls right, but keep them inside the content edge */
.add-city .maxline .right-controls { margin-left: auto; padding-right: 0; }

/* Make the zones list container use the same pad variable if not already */
.grid-container, .grid .rows { padding-left: var(--content-pad); padding-right: var(--content-pad); }

/* v1.9.46: hard-align right controls to content edge */
.add-city .maxline {
    display: flex !important;
    align-items: center;
    gap: 12px;
    position: relative;
}

.add-city .maxline .add-left {
    display: flex;
    align-items: center;
    gap: 12px;
    flex: 1 1 auto; /* occupy remaining space */
    min-width: 0;
}

.add-city .maxline .right-controls {
    margin-left: auto;
    display: flex;
    gap: 10px;
    align-items: center;
    position: absolute;
    right: 0;
}


/* v1.9.75 â€” hour cell hover calendar glyph */
.hour {
    position: relative;
}

.hour:focus {
    outline: none;
}

  .hour::after {background-color: var(--text); -webkit-mask-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCI+CjxwYXRoIGZpbGw9IiMwMDAiIGQ9Ik03IDJhMSAxIDAgMCAwLTEgMXYxSDVhMyAzIDAgMCAwLTMgM3YxaDIwVjdhMyAzIDAgMCAwLTMtM2gtMVYzYTEgMSAwIDEgMC0yIDB2MUg4VjNhMSAxIDAgMCAwLTEtMXpNMjIgMTBIMnY5YTMgMyAwIDAgMCAzIDNoMTRhMyAzIDAgMCAwIDMtM3YtOXptLTEyIDNoMnYyaC0ydi0yem0tNCAwaDJ2Mkg2di0yem04IDBoMnYyaC0ydi0yem0tOCA0aDJ2Mkg2di0yem00IDBoMnYyaC0ydi0yem04LTRoMnYyaC0ydi0yem0tNCA0aDJ2MmgtMnYtMnoiLz4KPC9zdmc+); mask-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCI+CjxwYXRoIGZpbGw9IiMwMDAiIGQ9Ik03IDJhMSAxIDAgMCAwLTEgMXYxSDVhMyAzIDAgMCAwLTMgM3YxaDIwVjdhMyAzIDAgMCAwLTMtM2gtMVYzYTEgMSAwIDEgMC0yIDB2MUg4VjNhMSAxIDAgMCAwLTEtMXpNMjIgMTBIMnY5YTMgMyAwIDAgMCAzIDNoMTRhMyAzIDAgMCAwIDMtM3YtOXptLTEyIDNoMnYyaC0ydi0yem0tNCAwaDJ2Mkg2di0yem04IDBoMnYyaC0ydi0yem0tOCA0aDJ2Mkg2di0yem00IDBoMnYyaC0ydi0yem04LTRoMnYyaC0ydi0yem0tNCA0aDJ2MmgtMnYtMnoiLz4KPC9zdmc+); -webkit-mask-repeat: no-repeat; mask-repeat: no-repeat; -webkit-mask-position: center; mask-position: center; -webkit-mask-size: 16px 16px; mask-size: 16px 16px;
    content: "";
    position: absolute;
    top: 1px;
    right: 6px;
    width: 16px;
    height: 16px;
    opacity: 0;
    transition: opacity .15s ease-in-out;
    /* calendar icon, uses currentColor so it adapts to theme */
    
    
    utf8,<svg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='currentColor'><path d='M7 2a1 1 0 0 0-1 1v1H5a3 3 0 0 0-3 3v1h20V7a3 3 0 0 0-3-3h-1V3a1 1 0 1 0-2 0v1H8V3a1 1 0 0 0-1-1zM22 10H2v9a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3v-9zm-12 3h2v2h-2v-2zm-4 0h2v2H6v-2zm8 0h2v2h-2v-2zm-8 4h2v2H6v-2zm4 0h2v2h-2v-2zm8-4h2v2h-2v-2zm-4 4h2v2h-2v-2z'/></svg>");
    pointer-events: none;
  }

  .hour:hover::after,
  .hour:focus-visible::after {
    opacity: 0.7;
  }

/* Slightly dimmer in dark themes to avoid glare */
.theme-dark .hour:hover::after,
.theme-dark .hour:focus-visible::after {
    opacity: 0.7;
}


/* v1.9.81 */
.your-zone-flag {
    color: var(--text);
}


/* Drag & drop visuals */
.row.dragging {
    opacity: .7;
}

.row.drop-before {
    box-shadow: 0 -2px 0 0 var(--accent);
}

.row.drop-after {
    box-shadow: 0 2px 0 0 var(--accent);
}

.row-header {
    padding: 10px 12px;
    display: flex;
    flex-direction: column;
    justify-content: center;
    gap: 4px;
    border-right: 1px solid var(--grid-border);
    cursor: pointer; /* "hand" on hover */
    user-select: none;
}

.row-header[draggable="true"] {
    cursor: grab;
}

.row-header[draggable="true"]:active {
    cursor: grabbing;
}

.city-name {
    font-weight: 700;
}

.city-sub {
    font-size: 12px;
    color: var(--muted);
}

.remove-div {
    align-content: center;
}


/* ===== v1.9.114 unified theme variables ===== */
:root {
  --clr-hour-day: rgba(128,128,128,.25);
  --clr-hour-night: rgba(128,128,128,.5);
  --clr-surface: #111;
  --clr-grid: rgba(128,128,128,.25);
  --clr-text: #e6e6e6;
  --clr-text-muted: #a0a0a0;
  --clr-accent: #3b82f6;
}

/*Midnight*/
html[data-theme="0"] {
    --clr-hour-day: rgba(128,128,128,.25);
    --clr-hour-night: rgba(128,128,128,.5);
    --clr-surface: #111;
    --clr-grid: rgba(128,128,128,.25);
    --clr-text: #e8eefc;
    --clr-text-muted: #aab6d3;
    --clr-accent: #5aa1ff;
    --yourzone-brightness: 1.15;
    --yourzone-overlay: rgba(255,255,255,0.1);
}

/*Dawn*/
html[data-theme="1"] {
    --clr-hour-day: rgba(128,128,128,.25);
    --clr-hour-night: rgba(128,128,128,.5);
    --clr-surface: #111;
    --clr-grid: rgba(128,128,128,.25);
    --clr-text: #ffeef8;
    --clr-text-muted: #e9cfe3;
    --clr-accent: #ff86c8;
    --yourzone-brightness: 1.15;
    --yourzone-overlay: rgba(255,255,255,0.1);
}

/*Forest*/
html[data-theme="2"] {
    --clr-hour-day: rgba(128,128,128,.25);
    --clr-hour-night: rgba(128,128,128,.5);
    --clr-surface: #111;
    --clr-grid: rgba(128,128,128,.25);
    --clr-text: #e9ffe9;
    --clr-text-muted: #bfe6c7;
    --clr-accent: #7df9a3;
    --yourzone-brightness: 1.15;
    --yourzone-overlay: rgba(255,255,255,0.1);
}

/*Mono*/
html[data-theme="3"] {
    --clr-hour-day: rgba(128,128,128,.25);
    --clr-hour-night: var(--hour-alt);
    --clr-surface: #111;
    --clr-grid: rgba(128,128,128,.25);
    --clr-text: #e6e6e6;
    --clr-text-muted: #a0a0a0;
    --clr-accent: #3b82f6;
    --yourzone-brightness: 1.15;
    --yourzone-overlay: rgba(255,255,255,0.1);
}

/*Pearl*/
html[data-theme="4"] {
    --clr-hour-day: rgba(128,128,128,.25);
    --clr-hour-night: rgba(128,128,128,.5);
    --clr-surface: #111;
    --clr-grid: rgba(128,128,128,.25);
    --clr-text: #1d2433;
    --clr-text-muted: #5b6b85;
    --clr-accent: #3a7bff;
    --yourzone-brightness: 1.07;
    --yourzone-overlay: rgba(128,128,128,0.05);
}

/*Sand*/
html[data-theme="5"] {
  --clr-hour-day: rgba(128,128,128,.25);
  --clr-hour-night: rgba(128,128,128,.5);
  --clr-surface: #111;
  --clr-grid: rgba(128,128,128,.25);
  --clr-text: #2a2430;
  --clr-text-muted: #6b6153;
  --clr-accent: #e09f3e;
  --yourzone-brightness: 1.07;
  --yourzone-overlay: rgba(128,128,128,0.08);
  --hour-night: #CEC8BB;
}

/*Sky*/
html[data-theme="6"] {
    --clr-hour-day: rgba(128,128,128,.25);
    --clr-hour-night: rgba(128,128,128,.5);
    --clr-surface: #111;
    --clr-grid: rgba(128,128,128,.25);
    --clr-text: #122033;
    --clr-text-muted: #4b5d78;
    --clr-accent: #2b8aef;
    --yourzone-brightness: 1.05;
    --yourzone-overlay: rgba(128,128,255,0.05);
}

/*Fuchsia*/
html[data-theme="7"] {
  --clr-hour-day: #fae8ff;
  --clr-hour-night: rgba(128,128,128,.5);
  --clr-surface: #111;
  --clr-grid: rgba(128,128,128,.25);
  --clr-text: #1f2937;
  --clr-text-muted: #6b4b66;
  --clr-accent: #d946ef;
  --yourzone-brightness: 1.08;
  --yourzone-overlay: rgba(128,128,128,0.05);
}

/*Wood*/
html[data-theme="8"] {
    --clr-hour-day: #f3e9dc;
    --clr-hour-night: rgba(128,128,128,.5);
    --clr-surface: #111;
    --clr-grid: rgba(128,128,128,.25);
    --clr-text: #1f2937;
    --clr-text-muted: #6a5746;
    --clr-accent: #8b5e34;
    --yourzone-brightness: 1.06;
    --yourzone-overlay: transparent;
}

/* Component usage (single-source approach) */
.hour.day { background: var(--clr-hour-day) !important; }
.hour.night { background: var(--clr-hour-night) !important; }

.row.is-your-zone .row-zone-remove,
.row.is-your-zone .hour {
    filter: brightness(var(--yourzone-brightness));
    box-shadow: inset 0 0 0 9999px var(--yourzone-overlay);
    transition: filter .15s ease-in-out;
}

/* === Unified day/night mapping & remove column background (v1.9.127-fix) === */

/* Default mapping: light-style themes use --hour as day, --hour-alt as night */
:root {
  --hour-day: var(--hour);
  --hour-night: var(--hour-alt);
}

/* Dark themes swap day/night so day is the lighter tone */
html[data-theme="0"],
html[data-theme="1"],
html[data-theme="2"],
html[data-theme="3"] {
  --hour-day: var(--hour-alt, var(--hour)); /* lighter in dark schemes */
  --hour-night: var(--panel-2, var(--hour-alt)); /* darker in dark schemes */
}

/* Apply the colors in one place */
.grid .row .timeline .hour.day   { background: var(--hour-day) !important; }
.grid .row .timeline .hour.night { background: var(--hour-night) !important; }

/* When JS marks elements with .row-zone-remove (for your zone),
   give them the same background as night cells so the first two columns match. */
.row-zone-remove { background: var(--hour-night) !important; }


/* Current time badge inside the city header */
.row-header { position: relative; }
.now-badge {
  position: absolute;
  right: 8px;
  top: 50%;
  transform: translateY(-50%);
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  text-align: right;
  font: inherit;
  font-size: 0.8em; /* match .city-name */
  line-height: 1;
  pointer-events: none;
}
.now-badge .now-time { line-height: 1; }
.now-badge .now-ampm { line-height: 1; opacity: .85; font-size: 0.7em; }

.row-header { display: grid; grid-template-columns: 1fr auto; grid-template-rows: auto auto; align-items: start; position: relative;}


/* Grid placement for header content */
.row-header .city-name { grid-column: 1; grid-row: 1; font-size: 0.8em; font-weight: 700; }
.row-header .city-sub  { grid-column: 1; grid-row: 2; }

.row-header .now-badge {
  grid-column: 2;
  grid-row: 1 / span 2;
  align-self: center;
  justify-self: center;
  display: flex;
  flex-direction: column;
  text-align: center !important;
 }

.row-header .now-badge .now-time,
.row-header .now-badge .now-ampm {
  font-size: inherit !important;
  line-height: 1;
  /*font-weight: 700;*/
}
  .row-header .now-badge .now-ampm {
    margin-top: 2px;
    align-self: center;
    text-align: center !important;
  }


/* Blinking colon for time badge */
@keyframes wt_blink {
  0%, 49% { opacity: 1; }
  50%, 100% { opacity: 0; }
}
.blink-colon { animation: wt_blink 1s steps(1, end) infinite; }
@media (prefers-reduced-motion: reduce) {
  .blink-colon { animation: none; }
}

/* AM/PM on third line in hour cells (12-hour mode) */
.hour .ampm {
  font-size: 10px;
  
  line-height: 1.1;

  font-weight: 700;

  color: inherit !important;
  font-weight: 700;

  color: var(--text) !important;
}
